<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>

        *{margin: 0;padding: 0;}
        ul{list-style: none;}

        .banner {
            position: relative;
        }

        .bannerImg {
            width: 80%;
            height: 500px;
            margin: 0 auto;
            position: relative;
            /* overflow: hidden; */
        }

        .bannerImg span {
            position: absolute;
            top: 0;
            left: 0;
        }

        .bannerImg div,.bannerImg div span img{
            width: 100%;
            height: 100%;
        }

        .bannerImg span.active {
            width: 100%;
            height: 100%;
            transition: all 1s;
        }

        .bannerBtn {
            width: 200px;
            position: absolute;
            left: 50%;
            margin-left: -100px;
            bottom: 22px;
            text-align: center;
        }

        .bannerBtn li {
            margin: 0 13px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            float: left;
            background: rgba(255, 255, 255, .4);
        }

        .bannerBtn li a {
            display: inline-block;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            margin: 3px;
        }

        .bannerBtn li a.aBtn {
            transition: all .6s ease;
        }
    </style>
</head>

<body>
    <div class="banner">
        <!-- 图片切换 -->
        <div class="bannerImg">
            <transition-group tag="div">
                <span v-for="(v,i) in banners" :key="i" :style="{opacity:(i+1)==n?'1':'0'}" class="active">
                    <img v-bind:src="v" alt="">
                </span>
            </transition-group>
        </div>
        <!--  dot -->
        <ul class="bannerBtn clear-fix">
            <li v-for="num in 3">
                <a href="javascript:;" :style="{background:num==n?'#ff7800':''}" @click='change(num)' class='aBtn'></a>
            </li>
        </ul>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
<script>
    var vm = new Vue({
        el: '.banner',
        data() {
            return {
                banners: ['img/0.jpg', 'img/1.jpg', 'img/2.jpg'],
                n: 1,　　　　　　　// 图片的index
                isCut: false,      // 是否切换
                tid1: '',　　　　// 这是isCut定时器的数据
                tid2: '',　　　　// 这是自动播放（next（））定时器的数据
                tid3: '',　　　　// 这是打开浏览器时，初始运动定时器的数据
            }
        },
        methods: {
            next() {
                // 下一张
                if (!this.isCut) {
                    this.isCut = false;
                    this.clearT();// 运动前 清除所有定时器
                    this.n = this.n + 1 == 4 ? 1 : this.n + 1;// 如果是第4张 就返回第1张
                    this.timeout();
                }
            },
            clearT() {
                // 清除所有定时器
                clearTimeout(this.tid1);
                clearTimeout(this.tid2);
                clearTimeout(this.tid3);
            },
            timeout() {
                // 运动结束 设置isCut为false 并调用next 进行下一次
                // 运动时间 1s
                this.tid2 = setTimeout(() => {
                    this.isCut = false
                }, 1000);
                this.tid1 = setTimeout(() => {
                    this.next()
                }, 3000);
            },
            change(num) {
                // 点击dot 切换图片 需要获取index
                if (!this.isCut) {
                    this.isCut = false;
                    this.clearT();
                    this.n = num;// 将显示图片变为选中的那一张
                    this.timeout()
                }
            }
        },
        mounted() {
            this.tid3 = setTimeout(this.next, 3000);
        }
    })
</script>

</html>
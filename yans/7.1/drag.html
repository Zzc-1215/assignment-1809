<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
    .app{
        width: 100px;
        height: 100px;
        border:1px solid #ccc;
        position: relative;
    }
    .drag{
        width: 20px;
        height: 20px;
        background-color: pink;
        position: absolute;
        border-radius: 50%;
        top: 0;
        right: 0;
    }
</style>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <div v-drag class="app">
    </div>
    <script>
        Vue.directive('drag',function(el,bingding){
            el.onmousedown=function (event) {
                var mouseX=event.clientX
                var mouseY=event.clientY
                var diffX=el.offsetLeft
                var diffY=el.offsetTop
                document.onmousemove=function(e){
                    el.style.left=(e.clientX-mouseX+diffX)+'px'
                    el.style.top=(e.clientY-mouseY+diffY)+'px'
                }
            }
            document.onmouseup=function(){
                document.onmousemove=null
            }
            // drag.onmousedown=function (event) {
            //     event.stopPropagation()
            //     var mouseX=event.pageX
            //     var mouseY=event.pageY
            //     document.onmousemove=function(e){
            //         var angle = getAngle(el.offsetLeft+50,el.offsetTop+50,e.pageX,e.pageY);
            //        el.style.transform = 'rotate('+ angle +'deg)';
            //     }
            // }
            
        })
        new Vue({
            el:'.app',
            directives:{
                'key':{}
            }
        })
    </script>
</body>
</html>
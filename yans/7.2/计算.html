<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
	<style>
	*{height: 0;}
	[v-cloak]{
		display: none;
	}
	input{
		border: none;
	}
	#app{
		width: 1000px;
		margin: 30px auto;
	}
	table{
		width: 100%;
		border-collapse: collapse;
	}
	td{
		width: 200px;
		height: 40px;
		text-align: center;
		border: 1px solid #333;
		font-size: 14px;
		position: relative;
	}
	input{
		width: 100%;
		line-height: 48px;
		position: absolute;
		top:0 ;
		left:0;
		height: 40px;
		border: 1px solid #333;
		/*display: none;*/
	}
	.tab{
		height: 20px;
		line-height: 20px;
	}
</style>
</head>
<body>
	<div id="app" v-cloak>
		<table>
			<tr>
				<td>产品</td>
				<td>数量</td>
				<td>单价</td>
				<td :rowspan="productsLength+1">
					<table class="tab">
						<tr>
							<td class="tab" colspan="8">金额</td>
						</tr>
						<tr>
							<td class="tab">千</td>
							<td class="tab">百</td>
							<td class="tab">十</td>
							<td class="tab">万</td>
							<td class="tab">千</td>
							<td class="tab">百</td>
							<td class="tab">十</td>
							<td class="tab">元</td>
						</tr>
						<tr v-for='v in productsLength'>
							<td v-for='l in amountList[v-1]'>{{l}}</td>
							<!-- <td v-for='j in '321''>{{j}}</td>
							<td>{{products[v-1].num*products[v-1].price}}</td> -->
						</tr>
					</table>
				</td>
				<td>备注</td>
			</tr>
			<tr v-for='item in products'>
				<td @click.self='showCl'>{{item.name}}
					<input type="text" v-model='item.name' @blur='hideCl'>
				</td>
				<td @click.self='showCl'>{{item.num}}
					<input type="text" v-model='item.num' @blur='hideCl'>
				</td>
				<td @click.self='showCl'>{{item.price}}
					<input type="text" v-model='item.price' @blur='hideCl'>
				</td>
				<td @click.self='showCl'>{{item.remark}}
					<input type="text" v-model='item.remark' @blur='hideCl'>
				</td>
			</tr>
			<tfoot>
				<td >总计</td>
				<td colspan='4'>{{total | chinese}}</td>
			</tfoot>
		</table>
	</div>

	<script> 
		new Vue({
			el:'#app',
			data(){
				return{
					// total:'',
					products:[
						{
							name:'',
							num:'2',
							price:'1',
							money:'',
							remark:'',
						},
						{
							name:'',
							num:'',
							price:'',
							money:'',
							remark:'',
						},
					]
				}
			},
			computed:{
				productsLength(){
					return this.products.length
				},
				amountList(){
					var arr=[];
					this.products.forEach(element=>{
						var str=(element.price*element.num).toString()
						var zeroLength=8-str.length
						for(var i = 0;i<zeroLength;i++) {
							str='0'+str
						}
						arr.push(str)
					})
					
					return arr
				},
				total(){
					var t=0;
					this.products.forEach(element=>{
						t+=element.price*element.num
					})
					return t
				}
			},
			filters:{
				'chinese':function(val){
					var list1=['零','壹','贰','叁','肆','伍','陆','柒','捌','玖','零']
					var list2=['元整','拾','佰','仟','万','拾','佰','仟','亿']
					var str=val.toString()
					var daxie=''
					for (var i=0;i<str.length;i++) {
						daxie+=list1[Number(str.charAt(i))]+list2[str.length-i-1]
					}
					return daxie
				}
			},
			methods:{
				showCl(e){
					e.target.children[0].style.display='block';
					e.target.children[0].focus()
				},
				hideCl(e){
					e.target.style.display='none';
				}
			},
		})
	</script>
</body>
</html>
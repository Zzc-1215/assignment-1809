<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <title>Document</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        [v-cloak]{
            display: none;
        }
        /* #container table{
            border-collapse: collapse;
            border: 1px solid;
        }
        #container tr{
            border-collapse: collapse;
            border: 1px solid;
            height: 50px;
            line-height: 50px;
            width:200px;
        }
        #container td{
            border-collapse: collapse;
            border: 1px solid;
            height: 50px;
            line-height: 50px;
            width:200px;
        } */

        table,table tr {
            border:1px solid #a8aeb2;
            line-height: 50px;
            /* padding: 5px 10px; */
        }
        table tr td{
            border:1px solid #a8aeb2;
            line-height: 50px;
            text-align: center;
            vertical-align: top;
            position: relative;
        }
        table {
            border-collapse: collapse;
        } 
        input{
            width: 100%;
            line-height: 48px;
            position: absolute;
            top: 0;
            left: 0;
            border: 1px solid #ddd;
            box-shadow: none;
            /* display: none; */
        }
        .gao{
            height: 50px;
            line-height: 50px;
        }
        .he{
            height: 24px;
            line-height: 24px;
        }
    </style>
</head>
<body>
    <div id="container" v-cloak>
        <table>
            <tr>
                <td style="width:200px;" class="gao">产品</td>
                <td style="width:200px;" class="gao">单价</td>
                <td style="width:200px;" class="gao">数量</td>
                <td :rowspan="productLength+1">
                    <table style="width:200px;">
                        <tr>
                            <td colspan="8"  class="he">金额</td>
                        </tr>
                        <tr>
                            <td class="he">千</td>
                            <td class="he">百</td>
                            <td class="he">十</td>
                            <td class="he">万</td>
                            <td class="he">千</td>
                            <td class="he">百</td>
                            <td class="he">十</td>
                            <td class="he">元</td>
                        </tr>
                        <tr v-for="n in productLength">
                            <td v-for="it in amountList[n-1]">
                                {{it}}
                            </td>
                        </tr>
                    </table>
                </td>
                <td style="width:200px;" class="gao">备注</td>
            </tr>
            <tr v-for="product in products">
                <td class="gao">{{product.name}}
                    <input type="text" v-model="product.name">
                </td>
                <td class="gao">{{product.price}}
                    <input type="text" v-model="product.price">
                </td>
                <td class="gao">{{product.num}}
                    <input type="text" v-model="product.num">
                </td>
                <td class="gao">{{product.remarks}}
                    <input type="text" v-model="product.remarks">
                </td>
            </tr>
            <tfoot>
                <tr>
                    <td>合计</td>
                    <td colspan="4">{{total | chinese}}</td>
                </tr>
            </tfoot>
        </table>
    </div>
    <script>
        new Vue({
            el:'#container',
            data(){
                return{
                    products:[
                        {
                            name:'',
                            price:'',
                            num:'',
                            remarks:''
                        },
                        {
                            name:'',
                            price:'',
                            num:'',
                            remarks:''
                        }
                    ]
                }
            },
            // methods:{
            //     showInput(e){
            //         e.target.children[0].style.display='block';
            //     },
            //     hideInput(e){
            //         e.target.style.display='none';
            //     }
            // },
            filters:{
                'chinese':function(val){
                    var list1 = ['','壹','贰','叁','肆','伍','陆','柒','捌','玖','拾'];
                    var list2 = ['元整','拾','佰','仟','万','拾','佰','仟','万'];
                    var str = val.toString();
                    var upper = '';
                    for(var i=0;i<str.length;i++){
                        upper += list1[Number(str.charAt(i))] + list2[str.length - i - 1];
                    }
                    return upper;
                }
            },
            computed:{
                productLength(){
                    return this.products.length
                },
                amountList(){
                    var arr = [];
                    this.products.forEach(element => {
                        var str = (element.price * element.num).toString();
                        var strLength = 8 - str.length;
                        for(var i=0;i<strLength;i++){
                            str = ' ' + str; 
                        }
                        arr.push(str);
                    });
                    return arr;
                },
                total(){
                    var t = 0;
                    this.products.forEach(element => {
                        t += element.price * element.num;
                    })
                    return t;
                }
            }
        })
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script type="text/javascript">
        window.onload = function () {
            document.documentElement.style.fontSize = document.documentElement.clientWidth / 760 * 100 + 'px';
            window.onresize = function () {
                document.documentElement.style.fontSize = document.documentElement.clientWidth / 760 * 100 + 'px';
            }
        }
    </script>
    <title>模拟美团</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <link rel="stylesheet" href="font/iconfont.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;
            font-size: 0.18rem;
            text-decoration: none;
            user-select: none;
            cursor: pointer;
        }

        .clearfix::after,
        .clearfix::before {
            content: '';
            display: table;
        }

        .clearfix::after {
            clear: both;
        }

        .clearfix {
            zoom: 1;
        }

        .box {
            width: 100%;
            height: auto;
            margin: 0 auto;
        }

        .header {
            width: 100%;
            height: 0.7rem;
            line-height: 0.7rem;
            border: 1px solid #dfdfdf;
            /* background-color: aqua; */
            position: relative;
        }

        .header .left {
            width: 80%;
            height: 0.7rem;
            float: left;
        }

        .header .left span {
            display: inline-block;
            width: 10%;
            /* float: left; */
            font-size: 20px;
            line-height: 0.7rem;
            padding-left: 34px;
            color: #048ae6;
        }

        .header .left h3 {
            width: 75%;
            float: right;
            font-size: 20px;
            line-height: 0.7rem;
        }

        .header .right {
            width: 20%;
            float: right;
        }

        .header .right span {
            width: 50%;
            height: 0.7rem;
            font-size: 20px;
            line-height: 0.7rem;
            text-align: center;
            display: inline-block;
            float: left;
        }

        .header .right span:nth-of-type(1) {
            color: #048ae6;
        }

        .header .right span:nth-of-type(2) {
            color: #737373;
        }




        .iconfont {
            font-size: 0.18rem;
        }

        .icon-icon-test {
            position: absolute;
            right: 0.3rem;
        }

        .nav {
            width: 100%;
            height: 0.7rem;
            line-height: 0.7rem;
            text-align: center;
            /* border-bottom: 1px solid #ccc; */
        }

        .list { 
            display: flex;
            justify-content: space-between;
        }

        .list li {
            width: 25%;
            float: left;
        }

        .hot {
            border-right: 1px #ccc solid;
        }

        .active {
            background-size: 0.05rem 0.25rem;
            /* background: url(./img/images/bj.png) no-repeat 0.1rem center; */
        }

        .content {
            width: 100%;
            height: auto;
        }

        .product {
            width: 25%;
            border: 1px #ccc solid;
            text-align: center;
            float: left;
            box-sizing: border-box;
            margin-top: 0.7rem;
        }

        .product li {
            width: 100%;
            height: 0.7rem;
            line-height: 0.7rem;
            box-sizing: border-box;
            border-bottom: 1px #ccc solid;
        }

        .information {
            width: 75%;
            height: auto;
            float: left;
        }

        .item-box,
        .jiesuan {
            width: 100%;
            height: 1.4rem;
            padding: 0.1rem;
            border-bottom: 1px #ccc solid;
            margin-top: 5px;
            box-sizing: border-box;
        }

        .img {
            width: 1.2rem;
            height: 1.2rem;
            float: left;
        }

        .img img {
            width: 100%;
            height: 100%;
        }

        .text {
            width: 70%;
            margin-left: 0.1rem;
            float: left;
            position: relative;
        }

        .text .bt {
            margin-top: 0.3rem;

        }

        .price {
            color: orange;
            font-size: 18px;
            line-height: 24px;
            vertical-align: middle;
        }

        .text .bt p {
            float: right;
            margin-top: 8px;
        }

        .jian,
        .jia {
            height: 20px;
            width: 20px;
            text-align: center;
            line-height: 20px;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 50%;
            margin: 0 0.1rem;
            background: #048ae6;
            color: white;
            font-size: 24px;
        }

        .footer {
            width: 100%;
            height: 0.8rem;
            /* background: aqua; */
            background: #515152;
            position: fixed;
            bottom: 0;
            line-height: 0.8rem;
            padding-left: 0.2rem;
            font-size: 0.24rem;
            box-sizing: border-box;
        }

        .footer a {
            text-align: center;
            float: right;
            color: #fff;
            width: 30%;
            height: 0.8rem;
            background-color: #37cb72;

        }

        .footer .footerLeft {
            width: 70%;
            height: 97px;
            float: left;
            background: #515152;
        }

        .footer .footerLeft .font {
            width: 60px;
            height: 60px;
            background: #1e1e1f;
            border-radius: 50%;
            margin-top: -20px;
            float: left;
        }

        .footer .footerLeft .font .img {
            width: 48px;
            height: 48px;
            background: #048ae6;
            border-radius: 50%;
            margin-left: 6px;
            margin-top: 6px;
            text-align: center;
            color: white;
            font-size: 26px;
            line-height: 48px;
            float: left;
        }

        .footer .footerLeft .meng {
            width: 50%;
            height: 97px;
            float: left;
            color: white;
            line-height: 20px;
            font-size: 16px;
            margin-left: 20px;
        }

        .footer .footerLeft .meng p {
            font-size: 14px;
            line-height: 20px;
            color: #ccc;
        }
    </style>
</head>

<body>
    <div id='app'>
        <router-view ref='reference'></router-view>
    </div>
    <template id='selectGoods'>
        <div>
            <div class="box">
                <!-- 头部 -->
                <header class='header'>
                    <div class="left"><span class="iconfont">&#xe67e;</span>
                        <h3>庆丰包子铺 （窦店）</h3>
                    </div>

                    <div class="right"><span class="iconfont">&#xe638;</span> <span class="iconfont">&#xe624;</span>
                    </div>
                </header>
                <!-- 下方内容 -->
                <div class="content clearfix">
                    <!-- 左侧菜单 -->
                    <ul class='product'>
                        <li @click='xianshi(index)' v-for='item,index in arr' :class="{'active':i==index}">
                            {{item.type}}
                        </li>
                    </ul>
                    <!-- 右侧具体信息 -->
                    <div class='information'>
                        <div class="nav">
                            <ul class='list'>
                                <li>点餐</li>
                                <li>评价</li>
                                <li>商家</li>
                            </ul>
                        </div>
                        <!-- 右侧商品列表 -->
                        <div class='item-box clearfix' v-for='(item,index) in list'>
                            <div class="img">
                                <img :src="item.img" alt="">
                            </div>
                            <div class="text">
                                <h3>{{item.text}}</h3>
                                <div class='bt'>
                                    <span class='price'>{{item.price}}</span>
                                    <p>
                                        <span class='jian' @click='del(item)'>-</span>
                                        {{item.num || 0}}
                                        <span class='jia' @click='add(item)'>+</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <footer class='footer'>
                    <div class="footerLeft">
                        <div class="font">
                            <div class="img iconfont">&#xe657;</div>
                        </div>
                        <div class="meng">
                            ￥{{total}}元
                            <p>另需配送费8元</p>
                        </div>
                    </div>

                    <!-- 实现页面的跳转  to 默认是a标签-->
                    <router-link :to="{name:'shoppingCart',params:{selectList}}">去结算</router-link>
                </footer>
            </div>
        </div>
    </template>
    <template id='shoppingCart'>
        <div>
            <div class='jiesuan' v-for='item in goodlist'>
                <div class="img">
                    <img :src="item.img" alt="">
                </div>
                <div class="text">
                    <h3>{{item.text}}</h3>
                    <div class='bt'>
                        <span class='price'>{{item.price}}</span>
                        <p>
                            <span class='jian' @click='del(item)'>-</span>
                            {{item.num || 0}}
                            <span class='jia' @click='add(item)'>+</span>
                        </p>
                    </div>
                </div>
            </div>
            <footer class="footer">
                总价:{{total}}元

                <a>去支付</a>
            </footer>
        </div>
    </template>
    <script>

        var selectGoods = {
            template: '#selectGoods',
            data() {
                return {
                    currentCategory: 0,
                    // length:0,
                    arr: [{
                        type: '热销商品',
                        code: [{
                            img: 'http://p0.so.qhimgs1.com/sdr/400__/t016e1575849b80008c.jpg',
                            text: '猪肉大葱',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p3.so.qhmsg.com/sdr/400__/t01dc0ccf0d1b6b40f8.jpg',
                            text: '猪肉大葱',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p2.so.qhmsg.com/sdr/400__/t01c0932f17d6c708e7.jpg',
                            text: '猪肉大葱',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p0.so.qhimgs1.com/sdr/400__/t01594d4c10ad931fac.jpg',
                            text: '猪肉大葱',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p3.so.qhmsg.com/sdr/400__/t01c04a036a826a3868.jpg',
                            text: '猪肉大葱',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p3.so.qhimgs1.com/sdr/400__/t011d97f59ab0029593.jpg',
                            text: '猪肉大葱',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p2.so.qhimgs1.com/sdr/400__/t015d48e4943567333e.jpg',
                            text: '猪肉大葱',
                            price: '￥10.8',

                        }
                            , {
                            img: 'http://p2.so.qhmsg.com/sdr/400__/t015765987d1556a9c7.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        }]
                    },
                    {
                        type: '招牌包子',
                        code: [{
                            img: 'http://p17.qhimgs3.com/dr/240_240_/t01b137243e1ada1825.jpg?t=1557399641',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p0.so.qhimgs1.com/sdr/400__/t01a2f4ebc15d83db5c.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p0.so.qhmsg.com/sdr/400__/t01683024ac6e03b11f.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p0.so.qhmsg.com/sdr/400__/t019d1074bb93fe07bf.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },

                        {
                            img: 'http://p1.so.qhimgs1.com/sdr/400__/t014fe2e9b118151cf1.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'http://p0.so.qhimgs1.com/sdr/400__/t0171fe98dbf06c44c4.png',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2446440385,2674115126&fm=26&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2361039587,1911492176&fm=26&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=591731724,2807699705&fm=26&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        }],
                    },
                    {
                        type: '营养粥品',
                        code: [{
                            img: 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=891543169,1646849409&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1925523793,1792055423&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2746186180,730858575&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1141338740,1367994576&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        }]
                    },
                    {
                        type: '爽口小菜',
                        code: [{
                            img: 'https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=792914383,750654932&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1908930410,3356823207&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        }]
                    },
                    {
                        type: '金牌水饺',
                        code: [{
                            img: 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2951920470,3970239851&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2522866663,1798252010&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        }]
                    },
                    {
                        type: '花样面食',
                        code: [{
                            img: 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1427332273,3339980770&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3132824135,2844314173&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        }]
                    },
                    {
                        type: '豆浆饮品',
                        code: [{
                            img: 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1427332273,3339980770&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        },
                        {
                            img: 'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3132824135,2844314173&fm=27&gp=0.jpg',
                            text: '新鲜青柠500g/皇新鲜特价新鲜特价新鲜待价',
                            price: '￥10.8',

                        }]
                    },



                    ],
                    list: [],
                    i: 0,
                }


            },
            methods: {
                xianshi(index) {
                    this.list = this.arr[index].code;
                    this.i = index;
                },
                del(item) {
                    if (item.num) {
                        if (item.num == 0) return;
                        item.num--;
                    }
                },
                add(item) {
                    console.log(item)
                    if (item.num) {
                        item.num++;
                    } else {
                        Vue.set(item, 'num', 1);
                    }
                }
            },
            computed: {
                selectList() {
                    var array = [];
                    this.arr.forEach(element => {
                        if (element.code && element.code.length > 0) {
                            element.code.forEach(el => {
                                if (el.num) {
                                    array.push(el);
                                }
                            });
                        }
                    });
                    return array;
                },
                total() {//计算商品总价
                    var n = 0;
                    this.selectList.forEach(element => {
                        console.log((element.price).split('￥')[1]);
                        n += (element.price).split('￥')[1] * element.num;
                    });
                    return n.toFixed(2);
                }
            },
            watch: {
                selectList(v1) {
                    console.log(v1);
                }
            }
        }
        // 第二个组件
        var shoppingCart = {
            // template: '<div>{{$route.params}}</div>',
            template: '#shoppingCart',
            data() {
                return {
                    goodlist: this.$route.params.selectList || []
                }
            },
            computed: {
                total() {//计算商品总价
                    var n = 0;
                    console.log(this.selectList)
                    this.goodlist.forEach(element => {
                        console.log((element.price).split('￥')[1]);
                        n += (element.price).split('￥')[1] * element.num;
                    });
                    return n.toFixed(2);
                }
            },


        }
        const router = new VueRouter({
            routes: [
                {
                    path: '/',
                    component: selectGoods
                }, {
                    path: '/shoppingCart',
                    name: 'shoppingCart',
                    component: shoppingCart
                }
            ]
        })
        var vm = new Vue({
            router,
            el: '#app',
        })

    </script>
</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>vue轮播图</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <style>
        .image {
            width: 90%;
            position: relative;
            overflow: hidden;
            margin: 0 auto;
        }

        .image:hover .image-control.left {
            transform: translateX(100%)
        }

        .image:hover .image-control.right {
            transform: translateX(-100%)
        }

        .image-inner {
            position: relative;
            overflow: hidden;
            width: 100%;
            font-size: 0
        }

        .image-inner>.item {
            position: relative;
            transition: all .5s ease-in-out
        }

        .image-inner>.item>img {
            width: 100%;
            height: 500px;
        }

        .image-control {
            position: absolute;
            top: 50%;
            width: 80px;
            height: 160px;
            line-height: 160px;
            margin-top: -40px;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, .6);
            background: rgba(0, 0, 0, .4);
            cursor: pointer;
            text-align: center;
            transition: all .5s ease-in-out;
        }

        .image-control.left {
            left: -80px
        }

        .image-control.right {
            right: -80px
        }

        .image-animate-enter {
            opacity: 0;
            transform: scale(.8, .8)
        }

        .image-animate-leave {
            position: absolute !important;
            top: 0;
            width: 100%
        }

        .image-animate-leave-to-left,
        .image-animate-leave-to-right {
            position: absolute !important;
            top: 0;
            width: 100%;
            z-index: 10
        }

        .image-animate-leave-to-left {
            transform: translateX(-100%) scale(.8, .8)
        }

        .image-animate-leave-to-right {
            transform: translateX(100%) scale(.8, .8)
        }
    </style>
</head>

<body>
    <div id="app" class="image" @mouseover="isImages=true" @mouseout="isImages=false">
        <div class="image-inner">
            <transition name="image-animates" enter-class="image-animate-enter" :leave-active-class="leaveToClass">
                <div class="item" :key="active">
                    <img :src="image[active].image" alt="">
                </div>
            </transition>
        </div>
        <!-- 左右两个点击的按钮 -->
        <a @click="move(-1)" class="left image-control">
            <i style="font-style:normal;font-weight:700;font-size: 60px;"> < </i> 
        </a> 
        <a @click="move(1)" class="right image-control">
            <i style="font-style:normal;font-weight:700;font-size: 60px;"> > </i>
        </a>
    </div>
    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    active: -1,//移动几次，默认为-1
                    image: [{ "image": "img/1.jpg" }, { "image": "img/2.jpg" }, { "image": "img/3.jpg" }, { "image": "img/4.jpg" }, { "image": "img/5.jpg" }, { "image": "img/6.jpg" }, { "image": "img/7.jpg" }, { "image": "img/8.jpg" }],  //所有的图片
                    times: null,    //  定时器
                    isImages: false,    //  定义开关，在mouseover和mouseout的时候去使用
                    leaveToClass: "",   //  
                }
            },
            methods: {
                imgAnimate() {
                    if (!this.isImages) {
                        this.move(1);
                    }
                    setTimeout(this.imgAnimate.bind(this), 1000)
                },
                move(direction, index) {
                    var num = this.active;//定义一个num来接受该索引值，去判断这个向哪移动
                    num = index !== undefined ? index : num + direction;//direction方向

                    num = num >= this.image.length ? 0 : num < 0 ? this.image.length - 1 : num;
                    //如果num大于剩下的图片的length，就为0，
                    // 如果num小于0了，就为当前的图片的索引值
                    this.active = num;//当前的这个下标等于存的这个索引值
                    this.leaveToClass = direction > 0 ? "image-animate-leave-to-left" : "image-animate-leave-to-right"//三元运算符，判断向左还是向右移动
                }
            },
            created() {
                var images = [];
                for (var i = 0; i < this.image.length; i++) {
                    images[i] = new Image();
                    images[i].src = this.image[i].image;
                }
                this.imgAnimate();
            },
            destroyed() {
                clearTimeout(this.times)
            }
        })
    </script>

</body>

</html>
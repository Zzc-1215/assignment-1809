<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        [v-cloak] {
            display: none;
        }

        #app {
            width: 96%;
            height: auto;
            margin: 0 auto;
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            box-shadow: 10px 10px 10px 10px #ccc;
            background: rgba(0, 0, 0, 0.08);
        }

        .title {
            background: rgba(231, 175, 238, 0.842);
        }

        .title p {
            text-align: center;
            font-size: 30px;
        }

        .title span {
            display: inline-block;
            padding: 10px;
            box-sizing: border-box;
        }

        ul {
            width: 100%;
            height: auto;
            overflow: hidden;
        }

        ul>li {
            box-sizing: border-box;
            display: inline-block;
            border: 1px solid #ccc;
            height: 60px;
            width: 60px;
            line-height: 30px;
            margin: 10px;
            text-align: center;
            cursor: pointer;
            display: inline-block;
            animation: mymove 5s infinite;
        }

        ul>li.light {
            background-color: green;
        }

        ul li .itemSpan {
            opacity: 0.4;
        }


        @keyframes mymove {
            50% {
                transform: scale(0.9);
                opacity: 0.8;
                /* transform: rotate(180deg); */
                transform: skew(30px,30px);
                transition: 0.1s;
            }

            100% {
                transform: scale(1);
                opacity: 1;
                /* transform: rotate(360deg); */
                transform: skew(50px,50px);
                transition: 0.1s;
            }
        }
    </style>
</head>

<body>
    <div id="app" v-cloak>
        <div class="title">
            <p>点亮所有的灯</p>
            <span>点击每一个小盒子的时候，让该盒子和其周围的上下左右都显示高亮，再点击的时候就让高亮消失</span>
        </div>
        <!-- <div class="content">
            <input type="text" v-model.number="sideLength" @change="conuts">
            <ul :style="{width:sideLength*30+'px'}">
                <li :class="{light:item}" v-for="(item,index) in arr1" @click='toLight(index)'></li>
            </ul>
        </div> -->
        <!-- v-model.number="sideLength" 写在input里面，这样打开页面就可以是默认为5 -->
        <!-- <input style="width: 100%;height: 40px;text-indent: 2rem;" placeholder="输入你想出现的盒子" type="text" v-model.number="sideLength" @input="conuts"> -->




        <input id="ipt" style="width: 98%;margin-top: 20px;height: 40px;text-indent: 2rem;" placeholder="输入你想出现的盒子"
            type="text" v-model.number="sideLength" @input="conuts">
        <ul :style="{width:sideLength*(60+20)+'px'}">
            <li :class="{light:item}" v-for="(item,index) in arr1" @click="toLight(index)">
                <span class="itemSpan" v-show="item"></span>
            </li>
        </ul>
    </div>
    <script src="vue.js"></script>
    <script>
        var vm = new Vue({
            el: '#app',
            data() {
                return {
                    sideLength: null,
                    arr1: null
                }
            },
            methods: {
                // 计数：有多少小盒子
                conuts() {
                    if (this.sideLength > 16) {
                        this.sideLength = 16;
                        alert('数值过大,浏览器会死掉,最好不要大于16,建议最大值为16');
                        // return;

                    }
                    var l = this.sideLength * this.sideLength;
                    var arr = [];
                    for (var i = 0; i < l; i++) {
                        arr[i] = '';
                    }
                    this.arr1 = arr;

                },
                // 点灯
                toLight(i) {
                    // 上下左右中
                    var around = this.getAround(i);
                    around.forEach(element => {
                        if (element >= 0 && element < this.arr1.length) {
                            if (this.arr1[element]) {
                                this.arr1.splice(element, 1, '');
                            } else {
                                this.arr1.splice(element, 1, '1');
                            }
                        }
                    });

                },
                // 上下左右
                getAround(center) {
                    var wu = [];
                    wu[0] = center - this.sideLength;
                    wu[1] = center + this.sideLength;
                    wu[2] = center % this.sideLength == 0 ? '-1' : center - 1;
                    wu[3] = (center + 1) % this.sideLength == 0 ? '-1' : center + 1;
                    wu[4] = center;
                    console.log(wu);
                    return wu;
                }
            },
        })



    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			#total table {
				border-collapse: collapse;
				border-spacing: 0;
			}
			
			#total table tr td {
				width: 200px;
				height: 50px;
				line-height: 50px;
				border: solid 1px #CCC;
				text-align: center;
				position: relative;
			}
			
			#total .inp {
				height: 25px;
				line-height: 25px;
			}
			
			input {
				width: 98%;
				line-height: 48px;
				position: absolute;
				left: 0;
				top: 0;
				border: none;
				/* border: solid 1px #efefef; */
				 display: none; 
			}
		</style>
	</head>

	<body>
		<div id="total">
			<table>
				<tr>
					<td width="200px">商品</td>
					<td width="200px">数量</td>
					<td width="200px">单价</td>
					<td :rowspan="shoplength+1">
						<table>
							<tr>
								<td colspan="8" class="small">金额</td>
							</tr>
							<tr>
								<td class="inp">千</td>
								<td class="inp">百</td>
								<td class="inp">十</td>
								<td class="inp">万</td>
								<td class="inp">千</td>
								<td class="inp">百</td>
								<td class="inp">十</td>
								<td class="inp">个</td>
							</tr>
							<tr v-for="snum in shoplength">
								<td v-for="cont in shopamount[snum-1]">{{cont}}</td>
							</tr>
						</table>
					</td>
					<td>留言</td>
				</tr>
				<tr v-for="shop in shops">
					<td @click="clicks">{{shop.shopname}}
						<input type="text" v-model="shop.shopname" @blur="blurs">
					</td>
					<td @click="clicks">{{shop.shopnum}}
						<input type="text" v-model="shop.shopnum" @blur="blurs">
					</td>
					<td @click="clicks">{{shop.shopprice}}
						<input type="text" v-model="shop.shopprice" @blur="blurs">
					</td>
					<td @click="clicks">{{shop.shopnotes}}
						<input type="text" v-model="shop.shopnotes" @blur="blurs">
					</td>
				</tr>
				<tfoot>
					<tr>
						<td>合计:</td>
						<td colspan="4">{{shoptotal | chiese}}</td>
					</tr>
				</tfoot>
			</table>
			{{shops}}
		</div>
		<script src="vue.js"></script>
		<script>
			new Vue({
				el: '#total',
				data() {
					return {
						shops: [{
								shopname: '',
								shopnum: 1,
								shopprice: 323,
								shopnotes: '',
							},
							{
								shopname: '',
								shopnum: '',
								shopprice: '',
								shopnotes: '',
							}
						]
					}
				},
				methods: {
					clicks(e) {
						e.target.children[0].style.display = 'block'
					},
					blurs(e) {
						e.target.style.display = 'none'
					}
				},
				filters: {
					'chiese': function(val) {
						var chinelist1 = ['', '壹', '贰', '叄', '肆', '伍', '陆', '柒', '捌', '玖', '拾']
						var chinelist2 = ['元整', '拾', '佰', '仟', '万', '拾', '佰', '仟', '亿']
						var str = val.toString()
						var capitalization = '';
						for(var i = 0; i < str.length; i++) {
							capitalization += chinelist1[Number(str.charAt(i))] + chinelist2[str.length - i - 1]
						}
						return capitalization
					}
				},
				computed: {
					shoplength() {
						return this.shops.length
					},
					shopamount() {
						var arr = []
						this.shops.forEach(element => {
							var str = (element.shopprice * element.shopnum).toString()
							var strlength = 8 - str.length;
							for(var i = 0; i < strlength; i++) {
								str = ' ' + str
							}
							arr.push(str)
						});
						return arr
					},
					shoptotal() {
						var tot = 0;
						this.shops.forEach(element => {
							tot += element.shopprice * element.shopnum
						});
						return tot
					}
				},
			})
		</script>
	</body>

</html>